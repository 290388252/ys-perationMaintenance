<div class="contain_all">
  <!--<div class="containers" #bg>-->
  <!--</div>-->
  <div class="bgimg">
    <div class="logo">
      <carousel>
        <slide>
          <img src="../../../assets/main/banner1.png" alt="first slide" style="display: block; width: 100%;height: 116px;">
          <div class="carousel-caption d-none d-md-block">
            <h3>First slide label</h3>
            <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
          </div>
        </slide>
      </carousel>
      <br>
      <!--<p class="title">.</p>-->
    </div>
    <!--five-->
    <div class="contain_btm">
      <div style="display: flex;width: 100%;height: 20px;margin-bottom: 12px" *ngIf="isEightDoor">
        <img (click)="eigthDoorChoose(0)" [src]="(eightDoorFlag === 0) ?'../../../assets/main/normal.png':'../../../assets/main/cold.png'"  alt="" style="width: 50%;height: 30px"><span (click)="eigthDoorChoose(0)" style="position: absolute;left: 15%;color: white;top: 4px;">点击冷藏商品</span>
        <img (click)="eigthDoorChoose(1)" [src]="(eightDoorFlag === 1) ?'../../../assets/main/normal.png':'../../../assets/main/cold.png'"   alt="" style="width: 50%;height: 30px"><span (click)="eigthDoorChoose(1)" style="position: absolute;right: 15%;color: white;top: 4px;">点击常温商品</span>
      </div>
      <p class="title">.</p>
      <div class="context-five" *ngIf="isFiveDoor">
        <div style="float: left;margin-top: 5px">
          <div (click)="yesOpenDoor(item)" *ngFor="let item of fiveIndexListLeft"
               [ngClass]="item['wayItemList'].length === 1 ? 'boxssf-one' : 'boxssf'"
               class=" card text-white addMain-bottom">
            <div>
              <img [ngClass]="item['wayItemList'].length === 1 ? 'addMain-img-onef' : 'addMain-imgf'"
                   src="{{img}}{{item['wayItemList'][0]['pic']}}" alt="">
              <div class="w-and-n-five-door" [hidden]="item['wayItemList'].length !== 1">
                <span class="w-n-size">重量：{{item['wayWeight']}}</span>
                <br>
                <span class="w-n-size">数量：{{item['wayItemList'][0]['num']}}</span>
              </div>
              <button [hidden]="item['wayItemList'].length === 1"
                      (click)="detail(item['wayItemList'][0], $event, item['wayWeight'])"
                      class="detailf-button"></button>
              <button [hidden]="item['wayItemList'].length !== 1"
                      (click)="detail(item['wayItemList'][0], $event, item['wayWeight'])" class="detailf-button"
                      style="left: 14%;width: 68%"></button>
            </div>
            <div style="text-align: center" [hidden]="item['wayItemList'].length === 1">
              <img style="left: 86px;width: 60px;height: 60px;position: absolute;top: 7px;"
                   [src]="turn(item['wayItemList'], 'img')" alt="">
              <button (click)="detail(item['wayItemList'][1], $event, item['wayWeight'])" class="detailf-button"
                      style="left: 75px"></button>
            </div>
          </div>
        </div>
        <div style="float: left;margin-top: 5px">
          <div (click)="yesOpenDoor(item)" *ngFor="let item of fiveIndexListRigth"
               [ngClass]="item['wayItemList'].length === 1 ? 'boxss-one' : 'boxss'"
               class=" card text-white addMain-bottom">
            <div>
              <img [ngClass]="item['wayItemList'].length === 1 ? 'addMain-img-one' : 'addMain-img'"
                   src="{{img}}{{item['wayItemList'][0]['pic']}}" alt="">
              <div class="w-and-n-five-door" [hidden]="item['wayItemList'].length !== 1">
                <span class="w-n-size">重量：{{item['wayWeight']}}</span>
                <br>
                <span class="w-n-size">数量：{{item['wayItemList'][0]['num']}}</span>
              </div>
              <button [hidden]="item['wayItemList'].length === 1"
                      (click)="detail(item['wayItemList'][0], $event, item['wayWeight'])"
                      class="detail-button"></button>
              <button [hidden]="item['wayItemList'].length !== 1"
                      (click)="detail(item['wayItemList'][0], $event, item['wayWeight'])" class="detail-button"
                      style="left: 24%"></button>
            </div>
            <div style="text-align: center" [hidden]="item['wayItemList'].length === 1">
              <img class="addMain-img" style="left: 91px" [src]="turn(item['wayItemList'], 'img')" alt="">
              <button (click)="detail(item['wayItemList'][1], $event, item['wayWeight'])" class="detail-button"
                      style="left: 75px"></button>
            </div>
          </div>
        </div>
      </div>
      <!--five-->


      <div class="context" *ngIf="isFourDoor">
        <div (click)="yesOpenDoor(item)" *ngFor="let item of indexList"
             [ngClass]="item['wayItemList'].length === 1 ? 'box-one' : 'box'" class=" card text-white mb-3">
          <div [ngClass]="item['wayItemList'].length === 1 ? 'box-body-one' : 'box-body'">
            <img class="col-img" src="{{img}}{{item['wayItemList'][0]['pic']}}" alt="">
            <div [ngClass]="item['wayItemList'].length === 1 ? 'w-and-n-one' : 'w-and-n'">
              <span class="w-n-size">重量：{{item['wayWeight']}}</span>
              <br>
              <span class="w-n-size">数量：{{item['wayItemList'][0]['num']}}</span>
            </div>
            <button [hidden]="item['wayItemList'].length === 1"
                    (click)="detail(item['wayItemList'][0], $event, item['wayWeight'])"
                    class="detail-button-four"></button>
            <button [hidden]="item['wayItemList'].length !== 1"
                    (click)="detail(item['wayItemList'][0], $event, item['wayWeight'])" class="detail-button-four"
                    style="left: 30%"></button>
            <br/>
          </div>
          <div [hidden]="item['wayItemList'].length === 1" class="box-body">
            <img class="col-img" [src]="turnImg(item['wayItemList'])" alt="">
            <div class="w-and-n">
              <span class="w-n-size">重量：{{item['wayWeight']}}</span>
              <br>
              <span class="w-n-size">数量：{{turn(item['wayItemList'], 'num')}}</span>
            </div>
            <button (click)="detail(item['wayItemList'][1], $event, item['wayWeight'])"
                    class="detail-button-four-second"></button>
            <br/>
          </div>
        </div>
      </div>
      <!--8门-->
      <div class="context" *ngIf="isEightDoor">
        <div (click)="yesOpenDoor(item)" *ngFor="let item of eightIndexList" [ngClass]="item['wayItemList'].length === 1 ? 'boxs-eight-one' : 'boxs-eight'" class=" card text-white addMain-bottom">
          <div style="text-align: center">
            <img class="eight-img-one" src="{{img}}{{item['wayItemList'][0]['pic']}}" alt="">
            <p class="text-eight-one"  style="color:#333333;font-wayWeight: 900;">重量:{{item['wayWeight']}}</p>
            <p class="text-eight-one"  style="color:#333333;font-wayWeight: 900;top: 22px;">数量:{{item['wayItemList'][0]['num']}}</p>
            <img (click)="detail(item['wayItemList'][0], $event, item['wayWeight'])" src="../../../assets/main/button-bg.png" alt="" class="eight-bt-left">
          </div>
          <div style="text-align: center" [hidden]="item['wayItemList'].length === 1">
            <img class="eight-img" [src]="turnImg(item['wayItemList'])" alt="">
            <!--<p class="text-eight" style="color: #333333;">重量:495387{{item['wayWeight']}}</p>-->
            <p class="text-eight" style="color: #333333;top: 22px;">数量:{{turn(item['wayItemList'], 'num')}}</p>
            <img (click)="detail(item['wayItemList'][1], $event, item['wayWeight'])" src="../../../assets/main/button-bg.png" alt="" class="eight-bt">
          </div>
        </div>
      </div>
    </div>
    <!--<div class="foot">-->
    <!--<img class="foot-img" src="../../../assets/main/logo1.png" alt="">-->
    <!--</div>-->
    <!--<div class="my-product">-->
      <!--<button (click)="openAll()" type="button" style="width: 72px">一键开门</button>-->
    <!--</div>-->
    <!--<div class="my-vol">-->

    <!--</div>-->

    <div class="my-reset">
      <p style="color: black;font-size: 17px">{{temperature}}</p>
    </div>
    <div style="position: absolute;top: 0;right: 0;">
      <span>{{state}}</span>
      <select (change)="mselectState($event.target.value)" class="form-control select-state" style="height: 25px" [(ngModel)]="selectState">
        <option value="0">请选择状态</option>
        <option value="1"><button (click)="mselectState(1)">测试失败</button></option>
        <option value="2">测试成功</option>
        <option value="3">开始测试</option>
        <option value="4">测试记录</option>
      </select>
    </div>
    <div class="my-restart">
      <button (click)="reStart()" type="button">重启</button>
      <button (click)="resetNum()" type="button">校准所有</button>
      <button (click)="adjustVol()" type="button">调节音量</button>
      <button (click)="resetWeight()" type="button">校准</button>
    </div>
    <!--<div class="my-open">-->
    <!--</div>-->
  </div>
  <nz-modal [nzVisible]="isVisiblebuhuo" [nzTitle]="modalTitlebuhuo" [nzContent]="modalContentbuhuo" [nzFooter]="modalFooterbuhuo" [nzClosable]="false">
    <ng-template #modalTitlebuhuo>
      <h6>选择本次操作类型</h6>
    </ng-template>
    <ng-template #modalContentbuhuo style="text-align: center" >
      <button nz-button nzType="primary" (click)="openDoor(6)" style="width: 99%;margin-bottom: 5px">撤货到其他机器</button>
      <button *ngIf="machinesVersion === 'new'" nz-button nzType="primary" (click)="onceResetWeight()" style="width: 99%;margin-bottom: 5px">一次校准</button>
      <button nz-button nzType="primary" (click)="openDoor(5)" style="width: 99%;margin-bottom: 5px">撤货</button>
      <button *ngIf="machinesVersion === 'old'" nz-button nzType="primary" (click)="openDoor(2)" style="width: 99%;margin-bottom: 5px">补货</button>
      <!--<button *ngIf="machinesVersion === 'new'" nz-button nzType="primary" (click)="openDoor(3)" style="width: 99%;margin-bottom: 5px">一次校准补货</button>-->
      <button nz-button nzType="primary" (click)="noOpenDoor()" style="width: 99%;margin-bottom: 5px">取消</button>
    </ng-template>
    <ng-template #modalFooterbuhuo>
    </ng-template>
  </nz-modal>
  <nz-modal [nzVisible]="isVisibleOpenDoor" [nzContent]="modalContents" [nzFooter]="modalFooters" [nzClosable]="false">
    <ng-template #modalContents #modalFooters style="text-align: center">
      <p style="font-size: medium;">请选择货道</p>
      <br>
      <div>
        <nz-radio-group [(ngModel)]="wayNo" [nzSize]="'large'" *ngIf="isFiveDoor">
          <label (click)="selectDoor(5)" class="radio-size" nz-radio-button [nzValue]="'5'">
            <span>5号门</span>
          </label>
        </nz-radio-group>

        <nz-radio-group style="width: 100%" [(ngModel)]="wayNo" [nzSize]="'large'">
          <label (click)="selectDoor(3)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'3'">
            <span>3号门</span>
          </label>
          <label (click)="selectDoor(4)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'4'">
            <span>4号门</span>
          </label>
        </nz-radio-group>
        <br>
        <nz-radio-group style="width: 100%" [(ngModel)]="wayNo" [nzSize]="'large'">
          <label (click)="selectDoor(1)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'1'">
            <span>1号门</span>
          </label>
          <label (click)="selectDoor(2)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'2'">
            <!--<label (click)="selectDoor(2)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'2'" [nzDisabled]="times === 2">-->
            <span>2号门</span>
          </label>
        </nz-radio-group>
      </div>
      <br>
      <!--<nz-input-number style="width: 100%;" [(ngModel)]="wayNo" [nzPlaceHolder]="'请输入货道'" [nzMin]="1" [nzMax]="4" [nzStep]="1" [nzDisabled]="count === 2"></nz-input-number>-->
    </ng-template>
    <ng-template #modalFooters style="text-align: center">
      <button nz-button nzType="primary" (click)="no()">关闭</button>
    </ng-template>
  </nz-modal>

  <nz-modal [nzVisible]="isVisibleOpenEightDoor" [nzContent]="modalEightContents" [nzFooter]="modalEightFooters" [nzClosable]="false">
    <ng-template #modalEightContents #modalEightFooters style="text-align: center">
      <p style="font-size: medium;">请选择货道</p>
      <br>
      <div>
        <nz-radio-group style="width: 100%" [(ngModel)]="wayNo" [nzSize]="'large'">
          <label (click)="selectDoor(1)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'1'">
            <span>1号门</span>
          </label>
          <label (click)="selectDoor(5)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'5'">
            <span>5号门</span>
          </label>
        </nz-radio-group>
        <br>
        <nz-radio-group style="width: 100%" [(ngModel)]="wayNo" [nzSize]="'large'">
          <label (click)="selectDoor(2)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'2'">
            <span>2号门</span>
          </label>
          <label (click)="selectDoor(6)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'6'">
            <!--<label (click)="selectDoor(2)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'2'" [nzDisabled]="times === 2">-->
            <span>6号门</span>
          </label>
        </nz-radio-group>
        <nz-radio-group style="width: 100%" [(ngModel)]="wayNo" [nzSize]="'large'">
          <label (click)="selectDoor(3)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'3'">
            <span>3号门</span>
          </label>
          <label (click)="selectDoor(7)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'7'">
            <span>7号门</span>
          </label>
        </nz-radio-group>
        <br>
        <nz-radio-group style="width: 100%" [(ngModel)]="wayNo" [nzSize]="'large'">
          <label (click)="selectDoor(4)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'4'">
            <span>4号门</span>
          </label>
          <label (click)="selectDoor(8)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'8'">
            <!--<label (click)="selectDoor(2)" style="width: 49%" class="radio-size" nz-radio-button [nzValue]="'2'" [nzDisabled]="times === 2">-->
            <span>8号门</span>
          </label>
        </nz-radio-group>
      </div>
      <br>
      <!--<nz-input-number style="width: 100%;" [(ngModel)]="wayNo" [nzPlaceHolder]="'请输入货道'" [nzMin]="1" [nzMax]="4" [nzStep]="1" [nzDisabled]="count === 2"></nz-input-number>-->
    </ng-template>
    <ng-template #modalEightFooters style="text-align: center">
      <button nz-button nzType="primary" (click)="no()">关闭</button>
    </ng-template>
  </nz-modal>

  <nz-modal [nzVisible]="isVisibleOpenDetail" [nzContent]="modalContentD" [nzFooter]="modalFooterD"
            [nzClosable]="false">
    <ng-template #modalContentD>
      <p style="font-size: medium;">详情</p>
      <p style="font-size: medium;">商品名称:{{itemName}}</p>
      <p style="font-size: medium;">容量:{{numDetail}}桶</p>
      <p style="font-size: medium;">规格:{{oneWeight}}</p>
      <p style="font-size: medium;">价格:{{prices}}</p>
      <p style="font-size: medium;">重量:{{weight}}</p>
      <p style="font-size: medium;">最大容量:{{fullNum}}桶</p>
      <p style="font-size: medium;">推荐最大容量:{{recommendCapacity}}桶</p>
      <select (change)="mselectMoney($event.target.value)" class="form-control select-state" style="height: 25px" [(ngModel)]="selectMoney">
        <option value="">请选择价格</option>
        <option *ngFor="let item of priceList" value="{{item.id}}">{{item.price}}元</option>
      </select>
    </ng-template>
    <ng-template #modalFooterD>
      <button nz-button nzType="primary" (click)="closeDetail()">关闭</button>
    </ng-template>
  </nz-modal>

  <nz-modal [nzVisible]="isVisibleOpenState" [nzContent]="modalContentS" [nzFooter]="modalFooterS"
            [nzClosable]="false">
    <ng-template #modalContentS>
      购买测试记录:
      <table class="table-bordered table-hover">
        <thead>
        <tr>
          <th style="padding: 5px">商品名称</th>
          <th style="padding: 5px">数量</th>
          <th style="padding: 5px">货道号</th>
          <th style="padding: 5px">创建时间</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of purchaseTestResult">
          <td class="td-padding">{{item.itemName}}</td>
          <td class="td-padding">{{item.num}}</td>
          <td class="td-padding">{{item.wayNumber}}</td>
          <td class="td-padding">{{item.createTime}}</td>
        </tr>
        </tbody>
      </table>
      补货测试记录:
      <table class="table-bordered table-hover">
        <thead>
        <tr>
          <th style="padding: 5px">商品名称</th>
          <th style="padding: 5px">数量</th>
          <th style="padding: 5px">货道号</th>
          <th style="padding: 5px">创建时间</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of replenishTestResult">
          <td class="td-padding">{{item.itemName}}</td>
          <td class="td-padding">{{item.num}}</td>
          <td class="td-padding">{{item.wayNumber}}</td>
          <td class="td-padding">{{item.createTime}}</td>
        </tr>
        </tbody>
      </table>
    </ng-template>
    <ng-template #modalFooterS>
      <button nz-button nzType="primary" (click)="closeDetail()">关闭</button>
    </ng-template>
  </nz-modal>

  <nz-modal [nzVisible]="isVisibleOpenSuccess" [nzContent]="modalContentSuccess" [nzFooter]="modalFooterSuccess"
            [nzClosable]="false">
    <ng-template #modalContentSuccess>
      未进行购买测试的记录:
      <table class="table-bordered table-hover">
        <thead>
        <tr>
          <th style="padding: 5px">货道号</th>
          <th style="padding: 5px">待测试次数</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of nopurchaseTestResult">
          <td class="td-padding" style="text-align: center">{{item.key}}</td>
          <td class="td-padding" style="text-align: center">{{item.value}}</td>
        </tr>
        </tbody>
      </table>
      未进行补货测试记录:
      <table class="table-bordered table-hover">
        <thead>
        <tr>
          <th style="padding: 5px">货道号</th>
          <th style="padding: 5px">待测试次数</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of noreplenishTestResult">
          <td class="td-padding" style="text-align: center">{{item.key}}</td>
          <td class="td-padding" style="text-align: center">{{item.value}}</td>
        </tr>
        </tbody>
      </table>
    </ng-template>
    <ng-template #modalFooterSuccess>
      <button nz-button nzType="primary" (click)="closeDetail()">关闭</button>
    </ng-template>
  </nz-modal>

  <nz-modal [nzVisible]="isVisibleOpenFailState" [nzContent]="modalContentZ" [nzFooter]="modalFooterZ"
            [nzClosable]="false">
    <ng-template #modalContentZ>
      <span>测试失败原因</span>
      <input type="text" class="form-control" placeholder="测试失败原因" style="font-size: 12px"
             [(ngModel)]="failStateRemark" name="failStateRemark">
      <button nz-button nzType="primary" style="margin-left: 76%;margin-top: 10px;" (click)="commit()">提交</button>
    </ng-template>
    <ng-template #modalFooterZ>
      <button nz-button nzType="primary" (click)="closeDetail()">关闭</button>
    </ng-template>
  </nz-modal>

  <nz-modal [(nzVisible)]="isVisible" [nzTitle]="modalvolTitle" [nzContent]="modalVol" [nzFooter]="modalvolFooter"
            (nzOnCancel)="myVolCancel()">
    <ng-template #modalvolTitle>
      请选择音量
    </ng-template>

    <ng-template #modalVol>
      <nz-row>
        <nz-col nzSpan="12">
          <nz-slider [nzMin]="0" [nzMax]="7" [(ngModel)]="volValue"></nz-slider>
        </nz-col>
        <nz-col nzSpan="4" [ngStyle]="{ 'marginLeft': '16px' , 'marginTop': '4px'}">
          <span>音量值</span>
        </nz-col>
        <div nz-col nzSpan="4" [ngStyle]="{ 'marginLeft': '0px' }">
          <nz-input-number [nzMin]="0" [nzMax]="7" [(ngModel)]="volValue"></nz-input-number>
        </div>
      </nz-row>
    </ng-template>

    <ng-template #modalvolFooter>
      <button nz-button nzType="default" (click)="myVolCancel()">取消</button>
      <button nz-button nzType="primary" (click)="myVolOk()">提交</button>
    </ng-template>
  </nz-modal>

  <nz-modal [(nzVisible)]="replenishTips" [nzTitle]="modalTipsTitle" [nzContent]="modalTips" [nzFooter]="modalTipsFooter"
            (nzOnCancel)="myVolCancel()">
    <ng-template #modalTipsTitle>
      提示
    </ng-template>
    <ng-template #modalTips>
      <p>该机器已升级，补货操作可按照新补货流程进行（直接点击窗口，输入实际商品数量，校准一次后进行补货），如果是更换商品后补货，请继续按照原流程进行（先做2次校准，再进行补货）</p>
    </ng-template>

    <ng-template #modalTipsFooter>
      <button nz-button nzType="default" (click)="myVolCancel()">取消</button>
      <button nz-button nzType="primary" (click)="tipsOk()">更换商品</button>
    </ng-template>
  </nz-modal>


  <div class="js_dialog" id="androidDialog2" [class]="loadingVisible ? 'mask-visible' : 'mask-invisible'">
    <div class="weui-mask"></div>
    <div class="weui-dialog weui-skin_android">
      <div class="weui-dialog__bd">
        <span>正在重启，请等待{{restartTimes}}秒</span>
      </div>
    </div>
  </div>
</div>
